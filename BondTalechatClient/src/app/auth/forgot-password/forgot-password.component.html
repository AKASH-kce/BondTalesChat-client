<!-- <div class="Background">
  <div class="login-container">
    <h2>Forgot Password ?</h2>
    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onFormSubmit()">
      <div class="form-elements">
        <div class="form-elements">
          <label for="email">Email</label>
          <input type="email" name="email" id="email" formControlName="email"/>
          <small
            *ngIf="
              forgotPasswordForm.get('email')?.invalid &&
              forgotPasswordForm.get('email')?.touched
            "
            >*Email is required.</small
          >
        </div>
        <label for="username">Username</label>
        <input type="text" name="username" id="username" formControlName="username" />
        <small
          *ngIf="
            forgotPasswordForm.get('username')?.invalid &&
            forgotPasswordForm.get('username')?.touched
          "
        >
          *Username is required.
        </small>
      </div>
      <div class="form-elements-button">
        <button type="submit" [disabled]="forgotPasswordForm.invalid"
          [class]="forgotPasswordForm.valid ? 'activeButton' : 'inactiveButton'">Send OTP</button>
      </div>
    </form>
    <div>
      <p class="login-footer">
        Already have an account ? <a routerLink="/">Login</a>
      </p>
    </div>
  </div>
</div> -->


<div class="Background">
  <div class="login-container">
    <h2 *ngIf="step === 1">Forgot Password?</h2>
    <h2 *ngIf="step === 2">Enter OTP</h2>
    <h2 *ngIf="step === 3">Reset Password</h2>

    <!-- Step 1: Email & Username -->
    <form *ngIf="step === 1" [formGroup]="forgotPasswordForm" (ngSubmit)="sendOtp()">
      <div class="form-elements">
        <label for="email">Email</label>
        <input type="email" name="email" id="email" formControlName="email"/>
        <small *ngIf="forgotPasswordForm.get('email')?.invalid && forgotPasswordForm.get('email')?.touched">
          *Email is required.
        </small>
      </div>
      <div class="form-elements">
        <label for="username">Username</label>
        <input type="text" name="username" id="username" formControlName="username" />
        <small *ngIf="forgotPasswordForm.get('username')?.invalid && forgotPasswordForm.get('username')?.touched">
          *Username is required.
        </small>
      </div>
      <div class="form-elements-button">
        <button type="submit" [disabled]="forgotPasswordForm.invalid" class="activeButton">Send OTP</button>
      </div>
    </form>

    <!-- Step 2: OTP -->
    <form *ngIf="step === 2" [formGroup]="otpForm" (ngSubmit)="verifyOtp()">
      <div class="form-elements">
        <label for="otp">Enter 6-digit OTP</label>
        <input type="text" name="otp" id="otp" formControlName="otp" maxlength="6" />
        <small *ngIf="otpForm.get('otp')?.invalid && otpForm.get('otp')?.touched">
          *OTP is required.
        </small>
      </div>
      <div class="form-elements-button">
        <button type="submit" [disabled]="otpForm.invalid" class="activeButton">Verify OTP</button>
      </div>
    </form>

    <!-- Step 3: Reset Password -->
    <form *ngIf="step === 3" [formGroup]="newPasswordForm" (ngSubmit)="resetPassword()">
      <div class="form-elements">
        <label for="newPassword">New Password</label>
        <input type="password" name="newPassword" id="newPassword" formControlName="newPassword" />
        <small *ngIf="newPasswordForm.get('newPassword')?.invalid">
          *Password must be at least 6 characters.
        </small>
      </div>
      <div class="form-elements">
        <label for="confirmNewPassword">Confirm Password</label>
        <input type="password" name="confirmNewPassword" id="confirmNewPassword" formControlName="confirmNewPassword" />
        <small *ngIf="newPasswordForm.hasError('mismatch')">
          *Passwords do not match.
        </small>
      </div>
      <div class="form-elements-button">
        <button type="submit" [disabled]="newPasswordForm.invalid" class="activeButton">Reset Password</button>
      </div>
    </form>

    <div>
      <p class="login-footer">
        Remember your password? <a routerLink="/">Login</a>
      </p>
    </div>
  </div>
</div>